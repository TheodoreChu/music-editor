(this["webpackJsonpmusic-editor"]=this["webpackJsonpmusic-editor"]||[]).push([[0],{25:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var o,i,s,a,r=n(0),c=n(1),d=n.n(c),u=n(14),l=n.n(u),f=(n(25),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),o(e),i(e),s(e),a(e)}))}),m=n(18),p=n(15),g=n(16),h=n(19),b=n(17),v=n(6),y=n(3);!function(e){e.Mode="mode"}(o||(o={})),function(e){e.ColumnResizer="column-resizer",e.Editor="editor",e.EditorContainer="editor-container",e.Header="header",e.MusicEditor="music-editor",e.View="view",e.PrintButton="print-button"}(i||(i={})),function(e){e.Dragging="dragging",e.NoSelection="no-selection"}(s||(s={})),function(e){e[e.Edit=0]="Edit",e[e.Split=1]="Split",e[e.View=2]="View"}(a||(a={}));var x,M=[{type:a.Edit,label:"Edit",css:"edit"},{type:a.Split,label:"Split",css:"split"},{type:a.View,label:"View",css:"view"}];!function(e){e.Down="mousedown",e.Move="mousemove",e.Up="mouseup"}(x||(x={}));var j=!1,w={mode:M[1],success:!1,text:"options scale=1.0\n\ntabstave notation=true tablature=false\nnotes "},E=new Map,S=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).editorKit=void 0,a.note=void 0,a.componentDidMount=function(){a.configureEditorKit(),a.configureResizer()},a.configureEditorKit=function(){var e=new v.EditorKitDelegate({setEditorRawText:function(e){a.setState({text:e},(function(){a.state.text||a.setState({text:w.text}),a.renderMusic(),a.loadSavedMode()}))},clearUndoHistory:function(){},getElementsBySelector:function(){return[]}});a.editorKit=new v.EditorKit({delegate:e,mode:"plaintext",supportsFilesafe:!1})},a.saveNote=function(){a.editorKit.onEditorValueChanged(a.state.text)},a.handleInputChange=function(e){var t=e.target.value;a.setState({text:t},(function(){a.saveNote(),a.state.mode!==M[0]&&a.renderMusic()}))},a.renderMusic=function(){var e=document.getElementById(i.View);e&&(e.innerHTML="");var t=y.Vex.Flow.Renderer,n=new t(e,t.Backends.SVG),o=new y.Artist(10,10,600,{scale:.8}),s=new y.VexTab(o);try{s.parse(a.state.text),o.render(n),a.state.success||a.setState({success:!0})}catch(r){a.setState({success:!1},(function(){if(e){e.innerHTML=r+'<br/><br/><hr/><br/>Need help? Check out the <a href="https://vexflow.com/vextab/tutorial.html" target="_blank" rel="nofollow noreferrer noopener">VexTab Tutorial</a>.'}}))}},a.loadSavedMode=function(){try{var e=a.editorKit.internal.componentManager.componentDataValueForKey(o.Mode);j,"number"===typeof e&&a.setModeFromModeType(e),a.setState({platform:a.editorKit.internal.componentManager.platform},(function(){j}))}catch(t){j}},a.setModeFromModeType=function(e){var t,n=Object(m.a)(M);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.type===e)return a.logDebugMessage("setModeFromModeType mode: ",o.type),void a.setState({mode:o},(function(){a.renderMusic()}))}}catch(i){n.e(i)}finally{n.f()}},a.changeMode=function(e){a.setState({mode:e},(function(){a.renderMusic()})),a.logDebugMessage("changeMode mode: ",e.type);try{a.editorKit.internal.componentManager.setComponentDataValueForKey(o.Mode,e.type)}catch(t){j}},a.removeSelection=function(){var e=window.getSelection();e&&e.removeAllRanges()},a.configureResizer=function(){var e=document.getElementById(i.MusicEditor),t=document.getElementById(i.Editor),n=document.getElementById(i.ColumnResizer),o=!1,r=0;n&&(r=n.offsetWidth),t&&n&&n.addEventListener(x.Down,(function(e){o=!0,n.classList.add(s.Dragging),t.classList.add(s.NoSelection)})),document.addEventListener(x.Move,(function(i){if(o){var s=i.clientX;e&&(s<r/2+15?s=r/2+15:s>e.offsetWidth-r-15&&(s=e.offsetWidth-r-15));var c=s-r/2;n&&(n.style.left=c+"px"),t&&(t.style.width=c-15+"px"),a.removeSelection()}})),document.addEventListener(x.Up,(function(e){o&&(o=!1,n&&n.classList.remove(s.Dragging),t&&t.classList.remove(s.NoSelection))}))},a.onBlur=function(){E.clear()},a.onFocus=function(e){},a.onKeyDown=function(e){E.set(e.key,!0),!E.get("Shift")&&E.get("Tab")?(e.preventDefault(),document.execCommand("insertText",!1,"\t")):E.get("Control")&&E.get("s")&&e.preventDefault()},a.onKeyUp=function(e){E.delete(e.key)},a.logDebugMessage=function(e,t){j},a.print=function(){a.renderMusic(),window.print()},a.state=w,a}return Object(g.a)(n,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"sn-component "+this.state.platform,id:i.MusicEditor,tabIndex:0,children:[Object(r.jsxs)("div",{id:i.Header,children:[Object(r.jsx)("div",{className:"segmented-buttons-container sk-segmented-buttons",children:Object(r.jsx)("div",{className:"buttons",children:M.map((function(t){return Object(r.jsx)("button",{onClick:function(){return e.changeMode(t)},className:"sk-button button "+(e.state.mode===t?"selected info":"sk-secondary-contrast"),children:Object(r.jsx)("div",{className:"sk-label",children:t.label})})}))})}),Object(r.jsx)("button",{className:"sk-button button sk-secondary-contrast",id:i.PrintButton,onClick:function(){return e.print()},children:Object(r.jsx)("div",{className:"sk-label",children:"Print"})})]}),Object(r.jsxs)("main",{id:i.EditorContainer,className:this.state.mode.css,children:[Object(r.jsx)("textarea",{autoCapitalize:"false",autoComplete:"false",className:this.state.mode.css,dir:"auto",id:i.Editor,onBlur:this.onBlur,onChange:this.handleInputChange,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,spellCheck:"false",value:this.state.text}),Object(r.jsx)("div",{className:this.state.mode.css,id:i.ColumnResizer}),Object(r.jsx)("section",{className:this.state.mode.css+(this.state.success?" success":""),id:i.View,tabIndex:0})]})]})}}]),n}(d.a.Component);n(47);l.a.render(Object(r.jsx)(d.a.StrictMode,{children:Object(r.jsx)(S,{})}),document.getElementById("root")),f()}},[[48,1,2]]]);
//# sourceMappingURL=main.ebe86da9.chunk.js.map